using System;
using UniRx;
using UnityEngine;

namespace Etermax.ViewNavigator.Domain {
    public class OverlayTransitionAdapter : IOverlayTransition {
        private readonly ITransition _transition;
        private readonly DefaultOverlayTransition _defaultOverlayTransition;

        public OverlayTransitionAdapter(ITransition transition) {
            _transition = transition;
            _defaultOverlayTransition = new DefaultOverlayTransition();
        }
        
        public void In(GameObject @from, GameObject to, Action onStart, Action onComplete) {
            _transition.In(@from, to, onStart, onComplete);
        }

        public void Out(GameObject currentView, GameObject targetView, Action onStart, Action onComplete) {
            _transition.Out(currentView, targetView, onStart, onComplete);
        }

        public IObservable<Unit> FadeInBackground(string viewGuid, Transform parentTransform) {
            return _defaultOverlayTransition.FadeInBackground(viewGuid, parentTransform);
        }

        public IObservable<Unit> FadeOutBackground() {
            return _defaultOverlayTransition.FadeOutBackground();
        }
    }
}