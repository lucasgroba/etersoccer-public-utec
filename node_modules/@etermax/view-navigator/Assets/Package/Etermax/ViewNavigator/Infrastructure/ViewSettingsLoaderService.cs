using System.Linq;
using Etermax.ViewNavigator.Infrastructure.ScripteableObjects;
using UnityEngine;

namespace Etermax.ViewNavigator.Infrastructure
{
    public static class ViewSettingsLoaderService
    {
        public const string ViewSettingResourcesPath = "Settings/ViewSettings";

        public static ScripteableViewsSettings Load()
        {
            return Resources.Load<ScripteableViewsSettings>(ViewSettingResourcesPath);
        }
    }

    public static class ViewSettingsProvider
    {
        public static MonoBehaviour GetViewPrefab(string viewName)
        {
            var settingsAsset = ViewSettingsLoaderService.Load();
            var viewSetting = settingsAsset.Settings.FirstOrDefault(setting => setting.ViewName == viewName);
            return viewSetting != null ? viewSetting.ViewMonoBehaviour : null;
        }
    }
}